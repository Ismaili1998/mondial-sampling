<form method="POST" class="submit-form"
    action="{% if page == 'add-client' %} {% url 'create-client' %} {% else %} {% url 'update-client' client.id %} {% endif %}">
    {% csrf_token %}
    <div class="row">
        <div class="col-md-6">
            <div class="form-group row">
                <label for="id_client_nbr" class="col-sm-4 col-form-label col-form-label-sm">Client Number</label>
                <div class="col-sm-8">
                    <input type="text" name="client_nbr" class="form-control form-control-sm" id="id_client_nbr"
                        value="{{client_nbr}}{{client.client_nbr}}"  required />
                </div>
            </div>
            <div class="form-group row mt-2">
                <label for="id_client_name" class="col-sm-4 col-form-label col-form-label-sm">Client Name</label>
                <div class="col-sm-8">
                    <input type="text" name="client_name" class="form-control form-control-sm" id="id_client_name"
                        value="{{client.client_name|default:''}}" required />
                </div>
            </div>
            <div class="form-group row mt-2">
                <label for="id_address" class="col-sm-4 col-form-label col-form-label-sm">Address</label>
                <div class="col-sm-8">
                    <input type="text" name="address" class="form-control form-control-sm" id="id_address"
                        value="{{client.address|default:''}}"  min="2" max="200"/>
                </div>
            </div>
            <div class="form-group row mt-2">
                <label for="id_postal_code" class="col-sm-4 col-form-label col-form-label-sm">Postal Code</label>
                <div class="col-sm-8">
                    <input type="text" name="postal_code" class="form-control form-control-sm" id="id_postal_code"
                        value="{{client.postal_code|default:''}}" min="2" max="50" />
                </div>
            </div>
            <div class="form-group row mt-2">
                <label for="email1" class="col-sm-4 col-form-label col-form-label-sm">Country</label>
                <div class="col-sm-8">
                    <select class="form-select form-select-sm" name="country" aria-label=".form-select-sm example">
                        <option value=""> Chose a country </option>
                        {% for country in countries %}
                        <option value="{{ country.id }}" {% if client.country.id == country.id %} selected {% endif %}>
                            {{ country }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-group row mt-2">
                <label for="id_city" class="col-sm-4 col-form-label col-form-label-sm">City</label>
                <div class="col-sm-8">
                    <input type="text" name="city" class="form-control form-control-sm" id="id_city"
                        value="{{client.city|default:''}}"  min="2" max="100"/>
                </div>
            </div>
            <div class="form-group row mt-2">
                <label for="language" class="col-sm-4 col-form-label col-form-label-sm">Language</label>
                <div class="col-sm-8">
                    <select name="language" class="form-select form-select-sm" id="language">
                        <option value=""> Chose a language </option>
                        {% for language in languages %}
                        <option value="{{language.id }}" {% if client.language.id == language.id %} selected {% endif %}>
                            {{ language }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-group row mt-2">
                <label for="id_fax" class="col-sm-4 col-form-label col-form-label-sm">Fax</label>
                <div class="col-sm-8">
                    <input type="text" name="fax" class="form-control form-control-sm" id="id_fax"
                        value="{{client.fax|default:''}}"  min="2" max="50"/>
                </div>
            </div>
            <div class="form-group row mt-2">
                <label for="id_phone1" class="col-sm-4 col-form-label col-form-label-sm">Phone number 1</label>
                <div class="col-sm-8">
                    <input type="text" name="phone_number1" class="form-control form-control-sm" id="id_phone1"
                        value="{{client.phone_number1|default:''}}"  min="8" max="20"/>
                </div>
            </div>
            <div class="form-group row mt-2">
                <label for="id_phone2" class="col-sm-4 col-form-label col-form-label-sm">Phone number 2</label>
                <div class="col-sm-8">
                    <input type="text" name="phone_number2" class="form-control form-control-sm" id="id_phone2"
                        value="{{client.phone_number2|default:''}}"  min="8" max="20"/>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group row">
                <label for="id_email1" class="col-sm-4 col-form-label col-form-label-sm">Email 1</label>
                <div class="col-sm-8">
                    <input type="email" name="email1" class="form-control form-control-sm" id="id_email1"
                    value="{{client.email1|default:''}}" />
                </div>
            </div>
            <div class="form-group row mt-2">
                <label for="id_email2" class="col-sm-4 col-form-label col-form-label-sm">Email 2</label>
                <div class="col-sm-8">
                    <input type="email" name="email2" class="form-control form-control-sm" id="id_email2"
                        value="{{client.email2|default:''}}" />
                </div>
            </div>
            <div class="form-group row mt-2">
                <label for="id_website" class="col-sm-4 col-form-label col-form-label-sm">Website</label>
                <div class="col-sm-8">
                    <input type="url" name="website" class="form-control form-control-sm" id="id_website"
                     placeholder="https://example.com" pattern="https://.*" size="80"
                     value="{{client.website|default:''}}" />
                </div>
            </div>
            <div class="form-group row mt-2">
                <label for="credit_limit" class="col-sm-4 col-form-label col-form-label-sm">Credit Limit</label>
                <div class="col-sm-8">
                    <input type="number" name="credit_limit" class="form-control form-control-sm" id="credit_limit"
                        value="{{client.credit_limit|default:''}}" />
                </div>
            </div>
            <div class="form-group row mt-2">
                <label for="remark" class="col-sm-4 col-form-label col-form-label-sm">Comment</label>
                <div class="col-sm-8">
                    <textarea name="remark" class="form-control form-control-sm" rows="3"
                        id="remark"> {{client.remark|default:''}} </textarea>
                </div>
            </div>
        </div>
    </div>
    <button type="submit" class="mt-2 btn btn-dark btn-sm">
        {% if page == 'add-client' %} Save client {% else %} Save changes {% endif %}</button>
</form>
<script>
    $(document).ready(function () {
        $('.submit-form').submit(function(event) {
            event.preventDefault(); // Prevent default form submission
            let formData = $(this).serialize(); // Serialize the form data
            let url = $(this).attr('action');
            $.ajax({
            type: 'POST',
            url: url, // Replace with the URL of your Django view
            data: formData,
            dataType: 'json',
            success: function(response) {
                $('#Modal').modal('hide');
                alert(response.message);
            },
            error: function() {
                alert('An error occurred');
            }
            });
        });
    });
</script>